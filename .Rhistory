) +
theme_minimal() +
theme(legend.position = "none")
ggplot(dados_bf_2023, aes(
area = beneficiados_bolsa,
fill = Sigla,
label = Sigla
)) +
geom_treemap() +
geom_treemap_text(
colour = "white",
place = "centre",
grow = TRUE,
reflow = TRUE
) +
labs(
title = "População beneficiada pelo Bolsa Família (2023)",
subtitle = "Distribuição por estado",
fill = "Estado"
) +
theme_minimal() +
theme(legend.position = "none")
ggplot(dados_bf_2023, aes(
area = beneficiados_bolsa,
fill = Sigla,
label = Sigla
)) +
geom_treemap() +
geom_treemap_text(
colour = "black",
place = "centre",
grow = TRUE,
reflow = TRUE
) +
labs(
title = "População beneficiada pelo Bolsa Família (2023)",
subtitle = "Distribuição por estado",
fill = "Estado"
) +
theme_minimal() +
theme(legend.position = "none")
ggplot(dados_bf_2023, aes(
area = beneficiados_bolsa,
fill = Estado,
label = Sigla
)) +
geom_treemap() +
geom_treemap_text(
colour = "black",
place = "centre",
grow = TRUE,
reflow = TRUE
) +
labs(
title = "População beneficiada pelo Bolsa Família (2023)",
subtitle = "Distribuição por estado",
fill = "Estado"
) +
theme_minimal() +
theme(legend.position = "none")
View(dados_bf_2023)
tapply(dados$linha_pobreza, dados$Ano, mean, na.rm = TRUE)
tapply(dados$linha_pobreza, dados$Ano, median, na.rm = TRUE)
tapply(dados$linha_pobreza, dados$Ano, mean, na.rm = TRUE)
renda_per_capita <- read_csv2("renda_per_capita.csv",
skip = 1,locale = locale(encoding = "UTF-8"))
View(pib_per_capita)
View(renda_per_capita)
renda_per_capita <- read_csv2("renda_per_capita.csv",
skip = 1,locale = locale(encoding = "UTF-8"))
dadosrenda_per_capita <- renda_per_capita |>
select(-c(2, 16))  |>
pivot_longer(
cols =  3:14 ,
names_to = "Ano",
values_to = "renda_per_capita")
dados_variacao_pib <- variacao_pib |>
select(-c(2, 22))  |>
pivot_longer(
cols =  3:20 ,
names_to = "Ano",
values_to = "variacao_pib")
dados_analfabetismo <- analfabetismo |>
select(-c(2, 10))  |>
pivot_longer(
cols =  3:8 ,
names_to = "Ano",
values_to = "analfabetismo")
dados_linha_pobreza <- linha_pobreza |>
select(-c(2, 9))  |>
pivot_longer(
cols =  3:7 ,
names_to = "Ano",
values_to = "linha_pobreza")
# bases em uma lista
bases <- list(dados_bolsafamilia, dados_gini, dados_homicidios, dados_idh,dados_linha_pobreza,
dados_mortalidade, dados_per_capita, dados_variacao_pib, dados_analfabetismo)
# bases em uma lista
bases <- list(dados_bolsafamilia, dados_gini, dados_homicidios, dados_idh,dados_linha_pobreza,
dados_mortalidade, dadosrendaper_capita, dados_variacao_pib, dados_analfabetismo)
# bases em uma lista
bases <- list(dados_bolsafamilia, dados_gini, dados_homicidios, dados_idh,dados_linha_pobreza,
dados_mortalidade, dadosrenda_per_capita, dados_variacao_pib, dados_analfabetismo)
# Aplicando o full_join a todas
dados  <- reduce(bases, full_join, by = c("Sigla", "Estado", "Ano"))
## MUdando a classificação das variaveis
dados <- dados |>
mutate(across(c("Sigla", "Estado", "Ano"), as.factor))
ggplot(subset(dados, Ano == "2020"),
aes(x = idh , y = renda_per_capita)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2023"),
aes(x = idh , y = renda_per_capita)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2021"),
aes(x = idh , y = renda_per_capita)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2020"),
aes(x = renda_per_capita , y = indice_gini)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
## pelo boxplot vemos como a mediana do numero de homicidios no pais é baixa
## e podemos observar como o estado da BAHIA apresnta números extremamente discrepantes
## do resto do país
ggplot(subset(dados, Ano == "2023"), aes( y = renda_per_capita)) +
geom_boxplot(outlier.colour = "red", outlier.shape = 16, outlier.size = 2) +
labs(
title = "Boxplot genérico no ggplot2",
x = "Categoria",
y = "Valor"
) +
coord_cartesian(ylim = c(0, 9000)) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_text(hjust = 0.5)
)
## pelo boxplot vemos como a mediana do numero de homicidios no pais é baixa
## e podemos observar como o estado da BAHIA apresnta números extremamente discrepantes
## do resto do país
ggplot(subset(dados, Ano == "2023"), aes( y = renda_per_capita)) +
geom_boxplot(outlier.colour = "red", outlier.shape = 16, outlier.size = 2) +
labs(
title = "Boxplot genérico no ggplot2",
x = "Categoria",
y = "Valor"
) +
coord_cartesian(ylim = c(0, 5000)) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_text(hjust = 0.5)
)
## pelo boxplot vemos como a mediana do numero de homicidios no pais é baixa
## e podemos observar como o estado da BAHIA apresnta números extremamente discrepantes
## do resto do país
ggplot(subset(dados, Ano == "2023"), aes( y = renda_per_capita)) +
geom_boxplot(outlier.colour = "red", outlier.shape = 16, outlier.size = 2) +
labs(
title = "Boxplot genérico no ggplot2",
x = "Categoria",
y = "Valor"
) +
coord_cartesian(ylim = c(0, 4000)) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_text(hjust = 0.5)
)
## pelo boxplot vemos como a mediana do numero de homicidios no pais é baixa
## e podemos observar como o estado da BAHIA apresnta números extremamente discrepantes
## do resto do país
ggplot(subset(dados, Ano == "2023"), aes( y = numero_de_homicidios)) +
geom_boxplot(outlier.colour = "red", outlier.shape = 16, outlier.size = 2) +
labs(
title = "Boxplot genérico no ggplot2",
x = "Categoria",
y = "Valor"
) +
coord_cartesian(ylim = c(0, 9000)) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_text(hjust = 0.5)
)
ggplot(subset(dados, Ano == "2020"),
aes(x = bolsafamilia , y = indice_gini)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
library(tidyverse)
library(treemapify)
ggplot(subset(dados, Ano == "2020"),
aes(x = bolsafamilia , y = indice_gini)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2020"),
aes(x = beneficiados_bolsa , y = indice_gini)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2020"),
aes(x = beneficiados_bolsa , y = idh)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2023"),
aes(x = beneficiados_bolsa , y = indice_gini)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2021"),
aes(x = numero_de_homicidios , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2021"),
aes(x = numero_de_homicidios , y = idh)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2021"),
aes(x = numero_de_homicidios , y = indice_gini)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2021"),
aes(x = numero_de_homicidios , y = beneficiados_bolsa)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
numero_de_homicidios <- read_csv2("taxa_de_homicídios.csv",
skip = 1,locale = locale(encoding = "UTF-8"))
taxa_de_homicidios <- read_csv2("taxa_de_homicídios.csv",
skip = 1,locale = locale(encoding = "UTF-8"))
View(taxa_de_homicidios)
dados_homicidios <- taxa_de_homicidios |>
select(-c(2, 23))  |>
pivot_longer(
cols =  3:21 ,
names_to = "Ano",
values_to = "taxa_de_homicidios")
dadosrenda_per_capita <- renda_per_capita |>
select(-c(2, 16))  |>
pivot_longer(
cols =  3:14 ,
names_to = "Ano",
values_to = "renda_per_capita")
dados_variacao_pib <- variacao_pib |>
select(-c(2, 22))  |>
pivot_longer(
cols =  3:20 ,
names_to = "Ano",
values_to = "variacao_pib")
dados_analfabetismo <- analfabetismo |>
select(-c(2, 10))  |>
pivot_longer(
cols =  3:8 ,
names_to = "Ano",
values_to = "analfabetismo")
dados_linha_pobreza <- linha_pobreza |>
select(-c(2, 9))  |>
pivot_longer(
cols =  3:7 ,
names_to = "Ano",
values_to = "linha_pobreza")
# bases em uma lista
bases <- list(dados_bolsafamilia, dados_gini, dados_homicidios, dados_idh,dados_linha_pobreza,
dados_mortalidade, dadosrenda_per_capita, dados_variacao_pib, dados_analfabetismo)
# Aplicando o full_join a todas
dados  <- reduce(bases, full_join, by = c("Sigla", "Estado", "Ano"))
## MUdando a classificação das variaveis
dados <- dados |>
mutate(across(c("Sigla", "Estado", "Ano"), as.factor))
##=============================================================
## Segurança publica
## pelo boxplot vemos como a mediana do numero de homicidios no pais é baixa
## e podemos observar como o estado da BAHIA apresnta números extremamente discrepantes
## do resto do país
ggplot(subset(dados, Ano == "2023"), aes( y = taxa_de_homicidios)) +
geom_boxplot(outlier.colour = "red", outlier.shape = 16, outlier.size = 2) +
labs(
title = "Boxplot genérico no ggplot2",
x = "Categoria",
y = "Valor"
) +
coord_cartesian(ylim = c(0, 9000)) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_text(hjust = 0.5)
)
##=============================================================
## Segurança publica
## pelo boxplot vemos como a mediana do numero de homicidios no pais é baixa
## e podemos observar como o estado da BAHIA apresnta números extremamente discrepantes
## do resto do país
ggplot(subset(dados, Ano == "2023"), aes( y = taxa_de_homicidios)) +
geom_boxplot(outlier.colour = "red", outlier.shape = 16, outlier.size = 2) +
labs(
title = "Boxplot genérico no ggplot2",
x = "Categoria",
y = "Valor"
) +
coord_cartesian(ylim = c(0, 100)) +
theme_minimal() +
theme(
legend.position = "none",
plot.title = element_text(hjust = 0.5)
)
## o numero de beneficidos do bolsa familia e o numero de homicidios se relacionam
ggplot(subset(dados, Ano == "2021"),
aes(x = taxa_de_homicidios , y = beneficiados_bolsa)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
## o numero de beneficidos do bolsa familia e o numero de homicidios se relacionam
ggplot(subset(dados, Ano == "2021"),
aes(x = taxa_de_homicidios , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
##homicidio e mortalidade se relacionam
ggplot(subset(dados, Ano == "2023"),
aes(x = taxa_de_homicidios , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2023"),
aes(x = taxa_de_homicidios )) +
geom_histogram() +
theme_minimal()
ggplot(subset(dados, Ano == "2023"),
aes(x = taxa_de_homicidios )) +
geom_density() +
theme_minimal()
ggplot(subset(dados, Ano == "2023"),
aes(x = taxa_de_homicidios )) +
geom_boxplot() +
theme_minimal()
## mortalidade infantil e pessoas abaixo da linha da pobreza apresentam correlação,
## > pobreza, > mortalidae
ggplot(subset(dados, Ano == "2023"),
aes(x = linha_pobreza , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
## mortalidade infantil e pessoas abaixo da linha da pobreza apresentam correlação,
## > pobreza, > mortalidae
ggplot(subset(dados, Ano == "2022"),
aes(x = linha_pobreza , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2022"), aes(x = linha_pobreza , y = taxa_de_mortalidade)) +
geom_point() +
facet_grid(Estado ~ Ano)  # linhas = região, colunas = ano
ggplot(dados, aes(x = linha_pobreza , y = taxa_de_mortalidade)) +
geom_point() +
facet_grid(Estado ~ Ano)  # linhas = região, colunas = ano
ggplot(subset(dados, ano >= max(ano) - 4),
aes(x = linha_pobreza, y = taxa_de_mortalidade)) +
geom_point(aes(color = pais), alpha = 0.7) +
facet_wrap(~ ano) +
theme_minimal() +
labs(
title = "Relação entre linha de pobreza e taxa de mortalidade (últimos 5 anos)",
x = "Linha de pobreza (%)",
y = "Taxa de mortalidade (por mil habitantes)"
)
ggplot(subset(dados, Ano >= max(Ano) - 4),
aes(x = linha_pobreza, y = taxa_de_mortalidade)) +
geom_point(aes(color = pais), alpha = 0.7) +
facet_wrap(~ Ano) +
theme_minimal() +
labs(
title = "Relação entre linha de pobreza e taxa de mortalidade (últimos 5 anos)",
x = "Linha de pobreza (%)",
y = "Taxa de mortalidade (por mil habitantes)"
)
ggplot(subset(dados, Ano == c(2020,2021,2022)),
aes(x = linha_pobreza, y = taxa_de_mortalidade)) +
geom_point(aes(color = pais), alpha = 0.7) +
facet_wrap(~ Ano) +
theme_minimal() +
labs(
title = "Relação entre linha de pobreza e taxa de mortalidade (últimos 5 anos)",
x = "Linha de pobreza (%)",
y = "Taxa de mortalidade (por mil habitantes)"
)
ggplot(subset(dados, Ano == c(2020,2021,2022)),
aes(x = linha_pobreza, y = taxa_de_mortalidade)) +
geom_point(aes(color = Estado), alpha = 0.7) +
facet_wrap(~ Ano) +
theme_minimal() +
labs(
title = "Relação entre linha de pobreza e taxa de mortalidade (últimos 5 anos)",
x = "Linha de pobreza (%)",
y = "Taxa de mortalidade (por mil habitantes)"
)
ggplot(subset(dados, Ano == c(2020,2021,2022)),
aes(x = linha_pobreza, y = taxa_de_mortalidade)) +
geom_point() +
facet_wrap(~ Ano) +
theme_minimal() +
labs(
title = "Relação entre linha de pobreza e taxa de mortalidade (últimos 5 anos)",
x = "Linha de pobreza (%)",
y = "Taxa de mortalidade (por mil habitantes)"
)
ggplot(subset(dados, Ano == c(2020,2021)),
aes(x = linha_pobreza, y = taxa_de_mortalidade)) +
geom_point() +
facet_wrap(~ Ano) +
theme_minimal() +
labs(
title = "Relação entre linha de pobreza e taxa de mortalidade (últimos 5 anos)",
x = "Linha de pobreza (%)",
y = "Taxa de mortalidade (por mil habitantes)"
)
## mortalidade infantil e pessoas abaixo da linha da pobreza apresentam correlação,
## > pobreza, > mortalidae
ggplot(subset(dados, Ano == "2022"),
aes(x = linha_pobreza , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
## mortalidade infantil e pessoas abaixo da linha da pobreza apresentam correlação,
## > pobreza, > mortalidae
ggplot(subset(dados, Ano == "2023"),
aes(x = linha_pobreza , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
## mortalidade infantil e pessoas abaixo da linha da pobreza apresentam correlação,
## > pobreza, > mortalidae
ggplot(subset(dados, Ano == "2021"),
aes(x = linha_pobreza , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
##homicidio e mortalidade se relacionam
ggplot(subset(dados, Ano == "2023"),
aes(x = taxa_de_homicidios , y = taxa_de_mortalidade)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
##===================================================
## desenvolvimento e renda
## a renda apresenta forte relação com o idh, e nao apresnta relação com o indice gini
ggplot(subset(dados, Ano == "2021"),
aes(x = idh , y = renda_per_capita)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2020"),
aes(x = renda_per_capita , y = indice_gini)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
## idh e gini não apresentam clara relação, o que pode nos dizer que não necessariamente um
## estado desigual é subdesenvolvido
ggplot(subset(dados, Ano == "2020"),
aes(x = idh , y = indice_gini)) +
geom_point(color = "purple4", size = 3) +
theme_minimal()
ggplot(subset(dados, Ano == "2019"),
aes(x = analfabetismo)) +
geom_histogram() +
theme_minimal()
ggplot(subset(dados, Ano == "2019"),
aes(x = analfabetismo)) +
geom_boxp() +
theme_minimal()
ggplot(subset(dados, Ano == "2019"),
aes(x = analfabetismo)) +
geom_boxplot() +
theme_minimal()
ggplot(subset(dados, Ano == "2019"),
aes(y = analfabetismo)) +
geom_boxplot() +
theme_minimal()
install.packages("IRkernel")
IRkernel::installspec()
IRkernel::installspec()
```{r}
#| label: pacotes
library(tidyverse)
library(sf)
library(geobr)
library(plotly)
library(leaflet)
library(gt)
library(DT)
library(treemapify)
library(flexdashboard)
library(scales)
library(purrr)
#| label: limpeza_dados
# Carregar CSVs
bolsafamilia <- read_csv2("data/bolsa_família.csv", skip = 1, locale = locale(encoding = "UTF-8"))
idh_estados <- read_csv2("data/idh_estados.csv", skip = 1, locale = locale(encoding = "UTF-8"))
indice_gini <- read_csv2("data/indige_gini.csv", skip = 1, locale = locale(encoding = "UTF-8"))
taxa_de_homicidios <- read_csv2("data/taxa_de_homicídios.csv", skip = 1, locale = locale(encoding = "UTF-8"))
renda_per_capita <- read_csv2("data/renda_per_capita.csv", skip = 1, locale = locale(encoding = "UTF-8"))
mortalidade <- read_csv2("data/taxa_de_mortalidade.csv", skip = 1, locale = locale(encoding = "UTF-8"))
variacao_pib <- read_csv2("data/variacao_pib.csv", skip = 1, locale = locale(encoding = "UTF-8"))
analfabetismo <- read_csv2("data/analfabetismo.csv", skip = 1, locale = locale(encoding = "UTF-8"))
linha_pobreza <- read_csv2("data/linha_pobreza.csv", skip = 1, locale = locale(encoding = "UTF-8"))
# Pivotar e organizar cada base
dados_mortalidade <- mortalidade |> select(-c(2,23)) |> pivot_longer(cols = 3:21, names_to="Ano", values_to="taxa_de_mortalidade")
dados_gini <- indice_gini |> select(-c(2,9)) |> pivot_longer(cols=3:7, names_to="Ano", values_to="indice_gini")
dados_bolsafamilia <- bolsafamilia |> select(-c(2,23)) |> pivot_longer(cols=3:21, names_to="Ano", values_to="beneficiados_bolsa")
dados_idh <- idh_estados |> select(-c(2,14)) |> pivot_longer(cols=3:12, names_to="Ano", values_to="idh")
dados_homicidios <- taxa_de_homicidios |> select(-c(2,23)) |> pivot_longer(cols=3:21, names_to="Ano", values_to="taxa_de_homicidios")
dados_renda_per_capita <- renda_per_capita |> select(-c(2,16)) |> pivot_longer(cols=3:14, names_to="Ano", values_to="renda_per_capita")
dados_variacao_pib <- variacao_pib |> select(-c(2,22)) |> pivot_longer(cols=3:20, names_to="Ano", values_to="variacao_pib")
dados_analfabetismo <- analfabetismo |> select(-c(2,10)) |> pivot_longer(cols=3:8, names_to="Ano", values_to="analfabetismo")
dados_linha_pobreza <- linha_pobreza |> select(-c(2,9)) |> pivot_longer(cols=3:7, names_to="Ano", values_to="linha_pobreza")
# Base para mapas
mapa <- read_state(year = 2020) |> rename(Sigla=abbrev_state, geometry=geom) |> select(-c(1,3,4,5))
# Merge completo
bases <- list(dados_bolsafamilia, dados_gini, dados_homicidios, dados_idh, dados_linha_pobreza,
dados_mortalidade, dados_renda_per_capita, dados_variacao_pib, dados_analfabetismo)
dados <- reduce(bases, full_join, by=c("Sigla","Estado","Ano"))
dados <- left_join(dados, mapa, by="Sigla")
dados <- dados |> mutate(across(c("Sigla","Estado","Ano"), as.factor))
dados <- st_as_sf(dados)
